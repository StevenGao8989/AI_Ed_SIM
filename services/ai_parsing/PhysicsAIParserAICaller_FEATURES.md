# PhysicsAIParserAICaller åŠŸèƒ½è¯¦è§£

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¦‚è¿°

`PhysicsAIParserAICaller` æ˜¯ä¸€ä¸ªå¢å¼ºç‰ˆçš„ç‰©ç†é¢˜ç›®AIè§£æå™¨ï¼Œå®ƒç»“åˆäº†ä¼ ç»Ÿè§£ææ–¹æ³•å’ŒAIæŠ€æœ¯ï¼Œèƒ½å¤Ÿå°†è‡ªç„¶è¯­è¨€æè¿°çš„ç‰©ç†é¢˜ç›®è½¬æ¢ä¸ºç»“æ„åŒ–çš„æ•°æ®ï¼Œä¸ºåç»­çš„DSLè½¬æ¢å’Œä»¿çœŸæä¾›æ”¯æŒã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### 1. æ ¸å¿ƒç»„ä»¶
- **åŸºç¡€è§£æå™¨**: åŸºäº `PhysicsAIParser` çš„æ¨¡æ¿åŒ¹é…è§£æ
- **AIå¢å¼ºæ¨¡å—**: åŸºäº DeepSeek API çš„æ™ºèƒ½è§£æ
- **åŸå­æ¨¡å—åº“**: 50+ ä¸ªç‰©ç†åŸå­æ¨¡å—çš„çŸ¥è¯†åº“
- **å•ä½è½¬æ¢å™¨**: ç‰©ç†å•ä½æ ‡å‡†åŒ–å¤„ç†
- **DSLè½¬æ¢å™¨**: ä¸ºä»¿çœŸDSLç”Ÿæˆæä¾›ç»“æ„åŒ–æ•°æ®

### 2. æ•°æ®æµæ¶æ„
```
ç”¨æˆ·è¾“å…¥é¢˜ç›® â†’ åŸºç¡€è§£æ â†’ AIå¢å¼º â†’ æ¨¡å—åˆ†è§£ â†’ æ¨¡å—ç»„åˆ â†’ DSLä¼˜åŒ– â†’ è¾“å‡ºç»“æœ
```

## ğŸ”§ ä¸»è¦åŠŸèƒ½æ¨¡å—

### 1. åŸºç¡€è§£æåŠŸèƒ½

#### `parseQuestion(question: string, options: any)`
- **åŠŸèƒ½**: ä½¿ç”¨å¤šçº§é™çº§ç­–ç•¥è§£æç‰©ç†é¢˜ç›®
- **ç­–ç•¥**: AIå¢å¼ºè§£æ â†’ æ¨¡æ¿åŒ¹é…è§£æ â†’ åŸºç¡€è§£æ
- **è¾“å‡º**: å®Œæ•´çš„ `ParsedQuestion` å¯¹è±¡

```typescript
const result = await aiParser.parseQuestion(
  "ä¸€ä¸ªç‰©ä½“ä»¥åˆé€Ÿåº¦20m/sæ–œæŠ›ï¼ŒæŠ›å°„è§’30Â°ï¼Œæ±‚æœ€å¤§é«˜åº¦å’Œå°„ç¨‹"
);
```

### 2. åŸå­æ¨¡å—è§£æåŠŸèƒ½

#### `parseQuestionWithAtomicModules(question: string, options)`
- **åŠŸèƒ½**: ä½¿ç”¨åŸå­æ¨¡å—æ€ç»´è§£æå¤æ‚ç‰©ç†é¢˜ç›®
- **ç‰¹ç‚¹**: 
  - è‡ªåŠ¨æ¨¡å—åˆ†è§£
  - æ™ºèƒ½æ¨¡å—ç»„åˆ
  - è§£é¢˜è·¯å¾„è§„åˆ’
  - ä¾èµ–å…³ç³»åˆ†æ

```typescript
const result = await aiParser.parseQuestionWithAtomicModules(
  "ä¸€ä¸ªè´¨é‡ä¸º1kgçš„ç‰©ä½“ä»¥åˆé€Ÿåº¦20m/sæ–œæŠ›ï¼ŒæŠ›å°„è§’30Â°ï¼Œæ±‚æœ€å¤§é«˜åº¦å’Œå°„ç¨‹",
  {
    enableModuleDecomposition: true,
    enableModuleComposition: true,
    language: 'zh'
  }
);
```

### 3. AIå¢å¼ºåŠŸèƒ½

#### æ™ºèƒ½æç¤ºè¯æ„å»º
- **æ¨¡å—åŒ–æ€ç»´**: å°†å¤æ‚é¢˜ç›®åˆ†è§£ä¸ºåŸå­æ¨¡å—
- **ç‰©ç†çŸ¥è¯†æ•´åˆ**: ç»“åˆ50+ä¸ªç‰©ç†æ¨¡å—çš„çŸ¥è¯†
- **ç»“æ„åŒ–è¾“å‡º**: ç”ŸæˆDSLå‹å¥½çš„ç»“æ„åŒ–æ•°æ®

#### AIè°ƒç”¨ç®¡ç†
- **é‡è¯•æœºåˆ¶**: è‡ªåŠ¨é‡è¯•å¤±è´¥çš„APIè°ƒç”¨
- **é”™è¯¯å¤„ç†**: ä¼˜é›…çš„é™çº§ç­–ç•¥
- **é…ç½®ç®¡ç†**: çµæ´»çš„AIæä¾›å•†é…ç½®

### 4. æ¨¡å—åˆ†è§£åŠŸèƒ½

#### `decomposeIntoAtomicModules(question: string, language)`
- **åŠŸèƒ½**: å°†å¤æ‚é¢˜ç›®åˆ†è§£ä¸ºç›¸å…³åŸå­æ¨¡å—
- **æ”¯æŒæ¨¡å—**: 50+ ä¸ªç‰©ç†åŸå­æ¨¡å—
- **æ™ºèƒ½è¯†åˆ«**: åŸºäºå…³é”®è¯å’Œç‰©ç†æ¦‚å¿µçš„æ¨¡å—è¯†åˆ«

#### æ”¯æŒçš„ç‰©ç†é¢†åŸŸ
- **åŸºç¡€åŠ›å­¦**: è¿åŠ¨å­¦ã€åŠ¨åŠ›å­¦ã€åˆšä½“åŠ›å­¦
- **èƒ½é‡ä¸æŒ¯åŠ¨**: åŠŸå’Œèƒ½ã€ç®€è°æŒ¯åŠ¨ã€æœºæ¢°æ³¢
- **ç”µç£å­¦**: é™ç”µåœºã€ç£åœºã€ç”µç£æ„Ÿåº”ã€äº¤æµç”µ
- **å…‰å­¦**: å‡ ä½•å…‰å­¦ã€ç‰©ç†å…‰å­¦ã€æ¿€å…‰
- **çƒ­å­¦**: çƒ­åŠ›å­¦ã€ç†æƒ³æ°”ä½“ã€çƒ­æœºæ•ˆç‡
- **è¿‘ä»£ç‰©ç†**: é‡å­åŠ›å­¦ã€åŸå­ç‰©ç†ã€æ ¸ç‰©ç†
- **å‰æ²¿ç‰©ç†**: å¤©ä½“ç‰©ç†ã€ç”Ÿç‰©ç‰©ç†ã€ç­‰ç¦»å­ä½“ç‰©ç†

### 5. æ¨¡å—ç»„åˆåŠŸèƒ½

#### `buildModuleComposition(modules, question, language)`
- **åŠŸèƒ½**: åˆ†ææ¨¡å—é—´çš„è¿æ¥å…³ç³»å’Œæ‰§è¡Œé¡ºåº
- **æ•°æ®æµåˆ†æ**: å‚æ•°åœ¨æ¨¡å—é—´çš„ä¼ é€’
- **æ‰§è¡Œé¡ºåº**: åŸºäºä¾èµ–å…³ç³»çš„æ‹“æ‰‘æ’åº
- **æ£€æŸ¥ç‚¹ç”Ÿæˆ**: å…³é”®è®¡ç®—èŠ‚ç‚¹çš„éªŒè¯ç‚¹

### 6. è§£é¢˜è·¯å¾„è§„åˆ’

#### `generateSolutionPath(parsedQuestion, moduleComposition)`
- **åŠŸèƒ½**: ç”Ÿæˆè¯¦ç»†çš„è§£é¢˜æ­¥éª¤å’Œè·¯å¾„
- **æ­¥éª¤ç±»å‹**: calculateã€substituteã€solveã€verifyã€convert
- **å‚æ•°æµ**: è¾“å…¥è¾“å‡ºå‚æ•°çš„æ¸…æ™°æ˜ å°„
- **å…¬å¼é€‰æ‹©**: ä¸ºæ¯ä¸ªæ­¥éª¤é€‰æ‹©æœ€åˆé€‚çš„ç‰©ç†å…¬å¼

### 7. DSLè½¬æ¢æ”¯æŒ

#### ç»“æ„åŒ–æ•°æ®ç”Ÿæˆ
- **æ±‚è§£ç›®æ ‡**: ä¸»è¦ç›®æ ‡å’Œæ¬¡è¦ç›®æ ‡
- **çº¦æŸæ¡ä»¶**: åˆå§‹æ¡ä»¶ã€è¾¹ç•Œæ¡ä»¶ã€ç‰©ç†çº¦æŸ
- **å…¬å¼ä½“ç³»**: ä¸»è¦å…¬å¼ã€ä¸­é—´å…¬å¼ã€éªŒè¯å…¬å¼
- **å…ƒæ•°æ®**: å¤æ‚åº¦è¯„ä¼°ã€ç½®ä¿¡åº¦ã€ç»Ÿè®¡ä¿¡æ¯

#### DSLå…¼å®¹æ€§éªŒè¯
- **æ ¼å¼æ£€æŸ¥**: éªŒè¯è¾“å‡ºæ ¼å¼çš„å®Œæ•´æ€§
- **é€»è¾‘æ£€æŸ¥**: éªŒè¯ç‰©ç†é€»è¾‘çš„ä¸€è‡´æ€§
- **å»ºè®®ç”Ÿæˆ**: æä¾›ä¼˜åŒ–å»ºè®®

## ğŸ“Š æ•°æ®ç»“æ„

### 1. ParsedQuestion æ¥å£
```typescript
interface ParsedQuestion {
  subject: 'physics';
  topic: string;
  question: string;
  parameters: Parameter[];
  units: UnitMapping[];
  
  // DSLè½¬æ¢å­—æ®µ
  target?: Target;
  solutionPath?: SolutionPath;
  formulas?: {
    primary: Formula[];
    intermediate: Formula[];
    verification: Formula[];
  };
  constraints?: {
    initial: Constraint[];
    boundary: Constraint[];
    physical: Constraint[];
    mathematical: Constraint[];
  };
  dslMetadata?: {
    complexity: 'simple' | 'medium' | 'complex';
    moduleCount: number;
    parameterCount: number;
    estimatedSteps: number;
    confidence: number;
  };
}
```

### 2. å‚æ•°å¢å¼º
```typescript
interface Parameter {
  symbol: string;
  value: number | null;
  unit: string;
  role: 'given' | 'unknown' | 'constant' | 'derived';
  note: string;
  
  // å¢å¼ºå­—æ®µ
  dslType?: 'scalar' | 'vector' | 'tensor';
  domain?: string; // 23ä¸ªç‰©ç†é¢†åŸŸ
  priority?: number;
  dependencies?: string[];
  formula?: string;
}
```

### 3. è§£é¢˜æ­¥éª¤
```typescript
interface SolutionStep {
  id: string;
  type: 'calculate' | 'substitute' | 'solve' | 'verify' | 'convert';
  module: string;
  action: string;
  inputs: string[];
  outputs: string[];
  formula: string;
  order: number;
  description?: string;
}
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### 1. æ•™è‚²é¢†åŸŸ
- **åˆä¸­ç‰©ç†**: åŸºç¡€åŠ›å­¦ã€çƒ­å­¦ã€å…‰å­¦é¢˜ç›®
- **é«˜ä¸­ç‰©ç†**: ç”µç£å­¦ã€è¿‘ä»£ç‰©ç†é¢˜ç›®
- **å¤§å­¦ç‰©ç†**: é«˜çº§ç‰©ç†ã€ä¸“ä¸šç‰©ç†é¢˜ç›®

### 2. ç ”ç©¶é¢†åŸŸ
- **ç†è®ºç‰©ç†**: é‡å­åŠ›å­¦ã€ç›¸å¯¹è®ºé¢˜ç›®
- **åº”ç”¨ç‰©ç†**: ææ–™ç‰©ç†ã€ç”Ÿç‰©ç‰©ç†é¢˜ç›®
- **å·¥ç¨‹ç‰©ç†**: ç­‰ç¦»å­ä½“ç‰©ç†ã€æ ¸ç‰©ç†é¢˜ç›®

### 3. ä»¿çœŸç³»ç»Ÿ
- **ç‰©ç†ä»¿çœŸ**: ä¸ºä»¿çœŸç³»ç»Ÿæä¾›ç»“æ„åŒ–è¾“å…¥
- **æ•™å­¦å·¥å…·**: æ™ºèƒ½ç‰©ç†é¢˜ç›®è§£æ
- **ç ”ç©¶å¹³å°**: ç‰©ç†æ¨¡å‹éªŒè¯

## âš™ï¸ é…ç½®é€‰é¡¹

### 1. AIé…ç½®
```typescript
interface AIConfig {
  provider: 'deepseek';
  apiKey?: string;
  baseURL?: string;
  model?: string;
  temperature?: number;
  maxTokens?: number;
  timeout?: number;
  retryCount?: number;
  retryDelay?: number;
  enableLogging?: boolean;
}
```

### 2. è§£æé€‰é¡¹
```typescript
interface ParsingOptions {
  enableModuleDecomposition?: boolean;
  enableModuleComposition?: boolean;
  enableAdvancedAnalysis?: boolean;
  enableFormulaExtraction?: boolean;
  enableUnitOptimization?: boolean;
  language?: 'zh' | 'en';
}
```

## ğŸ” æ™ºèƒ½ç‰¹æ€§

### 1. å¤šçº§é™çº§ç­–ç•¥
- **ç­–ç•¥1**: AIå¢å¼ºè§£æï¼ˆæœ€é«˜ç²¾åº¦ï¼‰
- **ç­–ç•¥2**: æ¨¡æ¿åŒ¹é…è§£æï¼ˆä¸­ç­‰ç²¾åº¦ï¼‰
- **ç­–ç•¥3**: åŸºç¡€è§£æï¼ˆä¿åº•æ–¹æ¡ˆï¼‰

### 2. æ™ºèƒ½æ¨¡å—è¯†åˆ«
- **å…³é”®è¯åŒ¹é…**: åŸºäºç‰©ç†æœ¯è¯­çš„æ¨¡å—è¯†åˆ«
- **ç½®ä¿¡åº¦è¯„ä¼°**: æ¯ä¸ªæ¨¡å—çš„åŒ¹é…ç½®ä¿¡åº¦
- **ä¾èµ–åˆ†æ**: æ¨¡å—é—´çš„å‚æ•°è¿æ¥å…³ç³»

### 3. è‡ªé€‚åº”è§£æ
- **å¤æ‚åº¦è¯„ä¼°**: è‡ªåŠ¨è¯„ä¼°é¢˜ç›®å¤æ‚åº¦
- **èµ„æºä¼˜åŒ–**: æ ¹æ®å¤æ‚åº¦è°ƒæ•´è§£æç­–ç•¥
- **é”™è¯¯æ¢å¤**: è‡ªåŠ¨å¤„ç†è§£æé”™è¯¯

## ğŸ“ˆ æ€§èƒ½ç‰¹ç‚¹

### 1. é«˜å‡†ç¡®æ€§
- **å¤šç­–ç•¥èåˆ**: ç»“åˆå¤šç§è§£ææ–¹æ³•
- **AIå¢å¼º**: åˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹çš„æ™ºèƒ½ç†è§£
- **æ¨¡å—åŒ–æ€ç»´**: åŸºäºç‰©ç†çŸ¥è¯†çš„ç»“æ„åŒ–è§£æ

### 2. å¼ºæ‰©å±•æ€§
- **æ¨¡å—åŒ–è®¾è®¡**: æ˜“äºæ·»åŠ æ–°çš„ç‰©ç†æ¨¡å—
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„TypeScriptç±»å‹æ”¯æŒ
- **é…ç½®çµæ´»**: æ”¯æŒå¤šç§é…ç½®é€‰é¡¹

### 3. é«˜å¯é æ€§
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶
- **é™çº§ç­–ç•¥**: å¤šçº§é™çº§ç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§
- **æ—¥å¿—è®°å½•**: è¯¦ç»†çš„æ—¥å¿—è®°å½•ä¾¿äºè°ƒè¯•

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ä½¿ç”¨
```typescript
import { PhysicsAIParserAICaller } from './PhysicsAIParserAICaller';

// åˆ›å»ºè§£æå™¨å®ä¾‹
const aiParser = new PhysicsAIParserAICaller({
  enableLogging: true,
  apiKey: 'your-deepseek-api-key'
});

// è§£æç‰©ç†é¢˜ç›®
const result = await aiParser.parseQuestion(
  "ä¸€ä¸ªè´¨é‡ä¸º2kgçš„ç‰©ä½“åœ¨æ°´å¹³é¢ä¸Šå—åˆ°10Nçš„åŠ›ï¼Œæ‘©æ“¦ç³»æ•°0.3ï¼Œæ±‚åŠ é€Ÿåº¦"
);

console.log('è§£æç»“æœ:', result);
console.log('æ¶‰åŠå‚æ•°:', result.parameters);
console.log('è§£é¢˜æ­¥éª¤:', result.solutionPath?.steps);
```

### é«˜çº§ä½¿ç”¨
```typescript
// ä½¿ç”¨åŸå­æ¨¡å—è§£æ
const result = await aiParser.parseQuestionWithAtomicModules(
  "ä¸€ä¸ªå¼¹ç°§æŒ¯å­ï¼Œè´¨é‡0.5kgï¼Œå¼¹ç°§å¸¸æ•°100N/mï¼Œæ±‚æŒ¯åŠ¨å‘¨æœŸ",
  {
    enableModuleDecomposition: true,
    enableModuleComposition: true,
    language: 'zh'
  }
);

// æŸ¥çœ‹æ¨¡å—ä¿¡æ¯
console.log('æ¶‰åŠæ¨¡å—:', result.solutionPath?.modules);
console.log('æ‰§è¡Œé¡ºåº:', result.solutionPath?.executionOrder);
console.log('æ£€æŸ¥ç‚¹:', result.solutionPath?.checkpoints);
```

## ğŸ‰ æ€»ç»“

`PhysicsAIParserAICaller` æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ç‰©ç†é¢˜ç›®AIè§£æå™¨ï¼Œå®ƒå…·å¤‡ï¼š

1. **å…¨é¢çš„ç‰©ç†è¦†ç›–**: æ”¯æŒä»åŸºç¡€ç‰©ç†åˆ°å‰æ²¿ç‰©ç†çš„æ‰€æœ‰é¢†åŸŸ
2. **æ™ºèƒ½è§£æèƒ½åŠ›**: ç»“åˆAIæŠ€æœ¯å’Œç‰©ç†çŸ¥è¯†çš„æ™ºèƒ½è§£æ
3. **æ¨¡å—åŒ–è®¾è®¡**: åŸºäºåŸå­æ¨¡å—çš„çµæ´»ç»„åˆ
4. **å®Œæ•´çš„DSLæ”¯æŒ**: ä¸ºä»¿çœŸç³»ç»Ÿæä¾›ç»“æ„åŒ–æ•°æ®
5. **é«˜å¯é æ€§**: å¤šçº§é™çº§ç­–ç•¥ç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œ

å®ƒæ˜¯ç‰©ç†æ•™è‚²å’Œç ”ç©¶é¢†åŸŸçš„å¼ºå¤§å·¥å…·ï¼Œèƒ½å¤Ÿå°†è‡ªç„¶è¯­è¨€æè¿°çš„ç‰©ç†é¢˜ç›®è½¬æ¢ä¸ºæœºå™¨å¯ç†è§£çš„ç»“æ„åŒ–æ•°æ®ï¼Œä¸ºåç»­çš„ä»¿çœŸå’Œè®¡ç®—æä¾›åšå®çš„åŸºç¡€ã€‚
